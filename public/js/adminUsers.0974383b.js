(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["adminUsers"],{"4df4":function(e,t,i){"use strict";var s=i("da84"),n=i("0366"),r=i("c65b"),a=i("7b0b"),o=i("9bdd"),c=i("e95a"),d=i("68ee"),u=i("07fa"),l=i("8418"),p=i("9a1f"),f=i("35a1"),m=s.Array;e.exports=function(e){var t=a(e),i=d(this),s=arguments.length,b=s>1?arguments[1]:void 0,h=void 0!==b;h&&(b=n(b,s>2?arguments[2]:void 0));var v,O,g,y,j,S,w=f(t),k=0;if(!w||this==m&&c(w))for(v=u(t),O=i?new this(v):m(v);v>k;k++)S=h?b(t[k],k):t[k],l(O,k,S);else for(y=p(t,w),j=y.next,O=i?new this:[];!(g=r(j,y)).done;k++)S=h?o(y,b,[g.value,k],!0):g.value,l(O,k,S);return O.length=k,O}},6135:function(e,t,i){"use strict";i.r(t);var s=i("7a23"),n={class:"component-padding tabs"},r=["disabled"],a=["disabled"],o=["disabled"];function c(e,t,i,c,d,u){var l=Object(s["E"])("users-listings"),p=Object(s["E"])("visitors-create"),f=Object(s["E"])("visitors-listings");return Object(s["w"])(),Object(s["f"])("section",null,[Object(s["g"])("div",n,[Object(s["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.activeTab="users"}),disabled:"users"==e.activeTab},"Users",8,r),Object(s["g"])("button",{onClick:t[1]||(t[1]=function(t){return e.activeTab="visitors"}),disabled:"visitors"==e.activeTab},"Visitors",8,a),Object(s["g"])("button",{onClick:t[2]||(t[2]=function(t){return e.activeTab="visitorsCreate"}),disabled:"visitorsCreate"==e.activeTab},"Create Visitors",8,o)]),"users"==e.activeTab?(Object(s["w"])(),Object(s["d"])(l,{key:0})):Object(s["e"])("",!0),"visitorsCreate"==e.activeTab?(Object(s["w"])(),Object(s["d"])(p,{key:1})):Object(s["e"])("",!0),"visitors"==e.activeTab?(Object(s["w"])(),Object(s["d"])(f,{key:2})):Object(s["e"])("",!0)])}function d(e,t,i,n,r,a){var o=Object(s["E"])("PermissionsEditField"),c=Object(s["E"])("Pagination");return Object(s["w"])(),Object(s["d"])(c,Object(s["s"])(Object(s["m"])(e.paginationUsers)),{permissions:Object(s["M"])((function(t){return[Object(s["j"])(o,Object(s["p"])(t,{allPermissions:e.permissionsAdditionalProps.allPermissions}),null,16,["allPermissions"])]})),_:1},16)}var u=i("6407"),l={key:0},p={key:1},f=["value"],m=["id","value"],b=["for"];function h(e,t,i,n,r,a){var o=Object(s["E"])("EditField");return Object(s["w"])(),Object(s["d"])(o,null,{viewing:Object(s["M"])((function(){return[i.permissions.length?(Object(s["w"])(),Object(s["f"])("div",l,[(Object(s["w"])(!0),Object(s["f"])(s["a"],null,Object(s["C"])(e.oldSelections,(function(e){return Object(s["w"])(),Object(s["f"])("div",{key:e},Object(s["G"])(e),1)})),128))])):(Object(s["w"])(),Object(s["f"])("div",p," No Permissions "))]})),editing:Object(s["M"])((function(){return[(Object(s["w"])(!0),Object(s["f"])(s["a"],null,Object(s["C"])(i.allPermissions,(function(i){return Object(s["w"])(),Object(s["f"])("div",{key:i},[Object(s["N"])(Object(s["g"])("input",{type:"checkbox",value:i,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.oldSelections=t}),disabled:""},null,8,f),[[s["I"],e.oldSelections]]),Object(s["N"])(Object(s["g"])("input",{type:"checkbox",id:i,value:i,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.currentSelections=t})},null,8,m),[[s["I"],e.currentSelections]]),Object(s["g"])("label",{for:i},Object(s["G"])(i),9,b)])})),128)),Object(s["g"])("button",{onClick:t[2]||(t[2]=function(){return a.submitPermissionsUpdate&&a.submitPermissionsUpdate.apply(a,arguments)})},"Submit")]})),default:Object(s["M"])((function(){return[Object(s["D"])(e.$slots,"default")]})),_:3})}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function O(e){if(Array.isArray(e))return v(e)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function g(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}i("fb6a"),i("b0c0");function y(e,t){if(e){if("string"===typeof e)return v(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}function j(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e){return O(e)||g(e)||y(e)||j()}var w=i("904e"),k=i("a6ea"),T={name:"permissionsEditField",components:{EditField:w["a"]},props:{name:String,email:String,permissions:Array,allPermissions:Array},data:function(){return{currentSelections:[],oldSelections:[]}},computed:{token:function(){return this.$store.getters.authToken}},watch:{permissions:{handler:function(){this.updateCurrentPermissions()},deep:!0}},created:function(){this.updateCurrentPermissions(),console.log(this.currentSelections)},methods:{updateCurrentPermissions:function(){this.currentSelections=S(this.permissions),this.oldSelections=S(this.permissions)},submitPermissionsUpdate:function(){var e={email:this.email,permissions:this.currentSelections},t=this,i=new XMLHttpRequest;i.onreadystatechange=function(){if(0==this.readyState);else if(1==this.readyState);else if(2==this.readyState);else if(3==this.readyState);else if(4==this.readyState){var e=JSON.parse(this.responseText);if(!this.responseText||!e)return void t.$store.dispatch(k["b"],{message:"Error - Please contact your system administrator"});if(200!=this.status)return void t.$store.dispatch(k["d"],{message:e.message});200==this.status&&(t.$store.dispatch(k["c"],{message:e.message}),t.oldSelections=S(t.currentSelections))}},i.open("POST","/api/v1/admin/user/permissions/update",!0),i.setRequestHeader("x-access-token",this.token),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(e))}}},P=i("6b0d"),A=i.n(P);const C=A()(T,[["render",h]]);var _=C,x={name:"usersListings",components:{Pagination:u["a"],PermissionsEditField:_},data:function(){return{paginationUsers:{title:"User Listings",keyField:"name",baseUrl:"/api/v1/admin/user/all",fieldKeys:["name","email","permissions"],limit:5,radius:3},permissionsAdditionalProps:{allPermissions:[]}}},computed:{token:function(){return this.$store.getters.authToken}},watch:{},created:function(){this.getPossiblePermissions()},methods:{getPossiblePermissions:function(){var e=this,t=new XMLHttpRequest;t.onreadystatechange=function(){if(0==this.readyState);else if(1==this.readyState);else if(2==this.readyState);else if(3==this.readyState);else if(4==this.readyState){var t=JSON.parse(this.responseText);if(!this.responseText||!t)return void e.$store.dispatch(k["b"],{message:"Error - Please contact your system administrator"});if(200!=this.status)return void e.$store.dispatch(k["d"],{message:t.message});200==this.status&&(e.permissionsAdditionalProps.allPermissions=t.data.items)}},t.open("GET","/api/v1/admin/user/permissions/all",!0),t.setRequestHeader("x-access-token",this.token),t.send()}}};const E=A()(x,[["render",d]]);var $=E,V={class:"form"},H=Object(s["g"])("h2",{class:"form__title"},"Add New Visitor",-1),U={class:"form__field"},q=Object(s["g"])("label",null,"Email",-1),F={class:"form__field--two form__field--left"};function L(e,t,i,n,r,a){return Object(s["w"])(),Object(s["f"])("section",null,[Object(s["g"])("div",V,[H,Object(s["g"])("div",U,[q,Object(s["N"])(Object(s["g"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.email=t}),placeholder:"example@email.com"},null,512),[[s["K"],e.email]])]),Object(s["g"])("div",F,[Object(s["g"])("input",{class:"form__actions__submit",type:"button",value:"Add Visitor",onClick:t[1]||(t[1]=function(){return a.addVisitor&&a.addVisitor.apply(a,arguments)})}),Object(s["g"])("input",{class:"form__actions__cancel",type:"button",value:"Cancel",onClick:t[2]||(t[2]=function(){return a.cleanup&&a.cleanup.apply(a,arguments)})})])])])}var R={name:"addVisitor",data:function(){return{email:""}},computed:{token:function(){return this.$store.getters.authToken}},methods:{addVisitor:function(){var e="/api/v1/admin/visitor/add",t=window.__HW__.utils.formatBodyParams({email:this.email}),i=this,s=new XMLHttpRequest;s.onreadystatechange=function(){if(0==this.readyState);else if(1==this.readyState);else if(2==this.readyState);else if(3==this.readyState);else if(4==this.readyState){var e=JSON.parse(this.responseText);if(!this.responseText||!e)return void i.$store.dispatch(k["b"],{message:"Error - Please contact your system administrator"});if(200!=this.status)return void i.$store.dispatch(k["d"],{message:e.message});200==this.status&&(i.$store.dispatch(k["c"],{message:e.message}),i.cleanup())}},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("x-access-token",this.token),s.send(t)},cleanup:function(){this.email=""}}};const M=A()(R,[["render",L]]);var N=M,J={key:0},I={key:1},X=["onClick"],B={key:0},D=Object(s["i"])("Approved"),G=["onClick"],K={key:1},W=Object(s["i"])("Not Approved"),z=["onClick"];function Q(e,t,i,n,r,a){var o=Object(s["E"])("pagination");return Object(s["w"])(),Object(s["d"])(o,Object(s["s"])(Object(s["m"])(e.paginationVisitors)),{codeExpirationTime:Object(s["M"])((function(t){var i=t.email,n=t.codeExpirationTime;return[Object(s["g"])("div",null,[Date.now()<n||e.emails[i]?(Object(s["w"])(),Object(s["f"])("div",J,"Code Still valid")):Object(s["e"])("",!0),Date.now()>n&&!e.emails[i]?(Object(s["w"])(),Object(s["f"])("div",I,[Object(s["g"])("button",{onClick:function(e){return a.sendEmailVerificationCode(i)}},"Send Code",8,X)])):Object(s["e"])("",!0)])]})),approvedForAccount:Object(s["M"])((function(t){var i=t.email,n=t.approvedForAccount;return[Object(s["g"])("div",null,[n||e.emailsApproved[i]?(Object(s["w"])(),Object(s["f"])("div",B,[D,Object(s["g"])("button",{onClick:function(e){return a.approveForAccount(i,!1)}},"Unapprove",8,G)])):Object(s["e"])("",!0),n||e.emailsApproved[i]?Object(s["e"])("",!0):(Object(s["w"])(),Object(s["f"])("div",K,[W,Object(s["g"])("button",{onClick:function(e){return a.approveForAccount(i,!0)}},"Approve",8,z)]))])]})),_:1},16)}var Y={name:"visitorsListings",components:{Pagination:u["a"]},data:function(){return{paginationVisitors:{title:"Visitor Listings",keyField:"email",baseUrl:"/api/v1/admin/visitor/all",fieldKeys:["email","codeExpirationTime","approvedForAccount"],limit:10,radius:3},emails:{},emailsApproved:{}}},computed:{token:function(){return this.$store.getters.authToken}},watch:{},created:function(){},methods:{sendEmailVerificationCode:function(e){var t="/api/v1/admin/user/email/sendOtherEmailVerificationCode",i=window.__HW__.utils.formatBodyParams({email:e}),s=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(0==this.readyState);else if(1==this.readyState);else if(2==this.readyState);else if(3==this.readyState);else if(4==this.readyState){var t=JSON.parse(this.responseText);if(!this.responseText||!t)return void s.$store.dispatch(k["b"],{message:"Error - Please contact your system administrator"});if(200!=this.status)return void s.$store.dispatch(k["d"],{message:t.message});200==this.status&&(s.$store.dispatch(k["c"],{message:t.message}),s.emails[e]="sent")}},n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("x-access-token",this.token),n.send(i)},approveForAccount:function(e,t){var i="/api/v1/admin/visitor/approve",s=window.__HW__.utils.formatBodyParams({email:e,approveVisitor:t}),n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){if(0==this.readyState);else if(1==this.readyState);else if(2==this.readyState);else if(3==this.readyState);else if(4==this.readyState){var i=JSON.parse(this.responseText);if(!this.responseText||!i)return void n.$store.dispatch(k["b"],{message:"Error - Please contact your system administrator"});if(200!=this.status)return void n.$store.dispatch(k["d"],{message:i.message});200==this.status&&(n.$store.dispatch(k["c"],{message:i.message}),n.emailsApproved[e]=t)}},r.open("POST",i,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.setRequestHeader("x-access-token",this.token),r.send(s)}}};const Z=A()(Y,[["render",Q]]);var ee=Z,te={name:"adminUsers",components:{UsersListings:$,VisitorsCreate:N,VisitorsListings:ee},data:function(){return{activeTab:"users"}},computed:{hasToken:function(){return this.$store.state.auth.hasToken}},watch:{hasToken:function(){this.handleAccess()}},created:function(){this.handleAccess()},methods:{handleAccess:function(){this.$store.getters.authToken||this.redirectToLogin()},redirectToLogin:function(){this.$router.push({path:"Login"})}}};const ie=A()(te,[["render",c]]);t["default"]=ie},"9bdd":function(e,t,i){var s=i("825a"),n=i("2a62");e.exports=function(e,t,i,r){try{return r?t(s(i)[0],i[1]):t(i)}catch(a){n(e,"throw",a)}}},a630:function(e,t,i){var s=i("23e7"),n=i("4df4"),r=i("1c7e"),a=!r((function(e){Array.from(e)}));s({target:"Array",stat:!0,forced:a},{from:n})},b0c0:function(e,t,i){var s=i("83ab"),n=i("5e77").EXISTS,r=i("e330"),a=i("9bf2").f,o=Function.prototype,c=r(o.toString),d=/^\s*function ([^ (]*)/,u=r(d.exec),l="name";s&&!n&&a(o,l,{configurable:!0,get:function(){try{return u(d,c(this))[1]}catch(e){return""}}})},d28b:function(e,t,i){var s=i("746f");s("iterator")},e01a:function(e,t,i){"use strict";var s=i("23e7"),n=i("83ab"),r=i("da84"),a=i("e330"),o=i("1a2d"),c=i("1626"),d=i("3a9b"),u=i("577e"),l=i("9bf2").f,p=i("e893"),f=r.Symbol,m=f&&f.prototype;if(n&&c(f)&&(!("description"in m)||void 0!==f().description)){var b={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=d(m,this)?new f(e):void 0===e?f():f(e);return""===e&&(b[t]=!0),t};p(h,f),h.prototype=m,m.constructor=h;var v="Symbol(test)"==String(f("test")),O=a(m.toString),g=a(m.valueOf),y=/^Symbol\((.*)\)[^)]+$/,j=a("".replace),S=a("".slice);l(m,"description",{configurable:!0,get:function(){var e=g(this),t=O(e);if(o(b,e))return"";var i=v?S(t,7,-1):j(t,y,"$1");return""===i?void 0:i}}),s({global:!0,forced:!0},{Symbol:h})}},fb6a:function(e,t,i){"use strict";var s=i("23e7"),n=i("da84"),r=i("e8b5"),a=i("68ee"),o=i("861d"),c=i("23cb"),d=i("07fa"),u=i("fc6a"),l=i("8418"),p=i("b622"),f=i("1dde"),m=i("f36a"),b=f("slice"),h=p("species"),v=n.Array,O=Math.max;s({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var i,s,n,p=u(this),f=d(p),b=c(e,f),g=c(void 0===t?f:t,f);if(r(p)&&(i=p.constructor,a(i)&&(i===v||r(i.prototype))?i=void 0:o(i)&&(i=i[h],null===i&&(i=void 0)),i===v||void 0===i))return m(p,b,g);for(s=new(void 0===i?v:i)(O(g-b,0)),n=0;b<g;b++,n++)b in p&&l(s,n,p[b]);return s.length=n,s}})}}]);
//# sourceMappingURL=adminUsers.0974383b.js.map